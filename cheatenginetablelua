PROCESS_NAME = 'MiniGameApp.exe'
if not openProcess(PROCESS_NAME) then
    messageDialog("LỖI : KHÔNG THỂ KIẾM ĐƯỢC ỨNG DỤNG, VUI LÒNG MỞ LẠI", mtError)
    closeCE()
    return
end

local PROCESS_NAME = 'MiniGameApp.exe'

local function getHostname()
    local handle = io.popen("hostname")
    if handle then
        local hostname = handle:read("*l")
        handle:close()
        return hostname:match("^%s*(.-)%s*$")
    else
        showMessage("LỖI : KHÔNG ĐÚNG TÊN MÁY TÍNH!")
        closeCE()
        return nil
    end
end

local function isHostnameVip(hostname)
    local vipHostnames = {
        "SkyDogdog", "DESKTOP-SJJMP4M"
    }
    for _, vipHostname in ipairs(vipHostnames) do
        if hostname == vipHostname then
            return true
        end
    end
    return false
end

local hostname = getHostname()

if hostname then
    local isVip = isHostnameVip(hostname)

    if isVip then

    else
        messageDialog("LỖI : HOSTNAME KHÔNG ĐƯỢC PHÉP", mtError)
        closeCE()
    end
else
    -- If hostname retrieval failed
    messageDialog("LỖI : KHÔNG ĐÚNG TÊN MÁY TÍNH!", mtError)
    closeCE()
end



    local miniuid = readInteger("[[libiworld.g_nHomeGardenSaveVersion+424]+C]+0")

    if miniuid == nil then
        messageDialog("LỖI : KHÔNG THỂ ĐỌC BỘ NHỚ, BẮT BUỘC BẠN PHẢI VÔ TÀI KHOẢN CỦA BẠN ĐỂ KIỂM TRA ID NGƯỜI CHƠI", mtError)
        closeCE()
        return
    end

    -- List of VIP UIDs
    local vipUIDs = {1009990000, 1207947573, 1132610116, 1103957721, 1023918578, 1299722340, 1196662709, 1297096991, 1127095936}
    local isVipUID = false

    for i = 1, #vipUIDs do
        if miniuid == vipUIDs[i] then
            isVipUID = true
            break
        end
    end

    if isVipUID then

    else
        closeCE()
    end
